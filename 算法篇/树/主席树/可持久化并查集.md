---
title: 可持久化并查集
date: 2019-10-18 09:27
update: 2019-10-18 09:27
author: Rainboy
password: "zxs44"
---

@[toc]

## 题目地址

[luogu P3402 【模板】可持久化并查集](https://www.luogu.org/problem/P3402)


## 解析

- 对fa建立 主席树
- 对dep建立 主席树

Q:查找只要在相应的树上查找?

只要在相应的版本的树上进行查找


Q:如何合并呢?

如果进行路径压缩,需要改的fa的值就很多,就不会值修改线段树上的一条链了.

不进行路径压缩,合并时就只会修改一个fa的值,这样就只会修改一条链了

图解:


使用**按秩合并**(具体看`树/并查集`)的方法来合并,但是这样的,又需要一个dep数组,来描述树的高度.幸运的是:每次合并也只会修改一个dep值.

所以,我们需要维护两个主席树(可持久化数组)

## 代码

```c
<%- include("code/luogu3402.cpp") %>
```

## 参考


 - [【AgOHの数据结构】可持久化并查集](https://www.bilibili.com/video/av57926646)
