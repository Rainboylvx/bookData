
https://www.cnblogs.com/qlky/p/5781081.html

树的重心的定义：
树若以某点为根，使得该树最大子树的结点数最小，那么这个点则为该树的重心，一棵树可能有多个重心。

树的重心的性质：
1、树上所有的点到树的重心的距离之和是最短的，如果有多个重心，那么总距离相等。

2、插入或删除一个点，树的重心的位置最多移动一个单位。

3、若添加一条边连接2棵树，那么新树的重心一定在原来两棵树的重心的路径上。

当然，这题我们只需要用到第一条性质。

怎么求树的重心：
定义几个数组： f[u]f[u] 表示以u为根的总距离， size[u]size[u] 表示以u为根的子树的大小（结点数，此题每个点要乘以权值，下文结点数均指此）。

显然， ans=min(f[i],1<=i<=n)ans=min(f[i],1<=i<=n)

首先我们任意以一个点为根dfs一遍，求出以该点为根的总距离。方便起见，我们就以1为根。

接下来就是转移，对于每个u能达到的点v，有：
f[v]=f[u]+size[1]-size[v]-size[v]f[v]=f[u]+size[1]−size[v]−size[v]
怎么来的呢？试想，当根从u变为v的时候，v的子树的所有节点原本的距离要到 uu ，现在只要到 vv 了，每个结点的距离都减少1，那么总距离就减少 size[v]size[v] ，同时，以v为根的子树以外的所有节点，原本只要到 uu 就行了，现在要到 vv ，每个节点的路程都增加了1，总路程就增加了 size[1]-size[v]size[1]−size[v] ，其中 size[1]size[1] 就是我们预处理出来的整棵树的大小，减去 size[v]size[v] 就是除以v为根的子树以外的结点数。

最后取最小值，得解。时间复杂度 O(n)O(n)

## 入门题目

P1364 医院设置

## 练习题目

- 洛谷P4299 首都
[codevs 3639] 树的中心---树形DP(树的重心)
【P4582】[FJOI2014]树的重心 - 洛谷
POJ 1741 Tree, 树的重心, 树分治, 点分治 - 
