---
_id: "b25fe205fb"
title: vim的使用
date: 2020-10-27 15:23
update: 2020-10-27 15:23
author: Rainboy
video: https://www.bilibili.com/video/BV1Gy4y1r7s5
titleEmojiTag: ":tv:"
---

@[toc]

## 安装

打开 https://github.com/rainboylvx/RainboyVim 按说明安装

如果上面的地址打不开，请打开这个国内的镜像： https://gitee.com/Rainboy/RainboyVim

## why and how

天下武功，唯快不破！(≖◡≖)✧

1. 在写代码的过程中完全不需要鼠标的参与
2. 各种快捷键的组合，大大加快编辑的速度


学习vim是不有很大的记忆压力？ 有，但不难

1. 不需要学到很高深，只要夠用就可以
2. 记忆是有诀窍的
3. 熟能生巧，肌肉记忆，想一想你打字需要看键盘吗？

如何才能学会vim：

1. 把下面的表背下来
2. 多打代码
3. 把vim当成唯一的文本编辑器

命令分类

 - 基础使用
    - [[vim {file}]] 打开/创建文件
    - [[i]] 进入插入模式，即可以像普通编辑器一样使用
    - [[esc]] 退出插入模式
    - [[:wq]] 保存并退出
 - 模式
 - 插入模式的进入方式
 - !跳转[重要]
 - 选择
  - 复制
  - 粘贴
 - 修改
    删除/剪切
    复制/粘贴
 - RainboyVim配置文件下的特别使用
 - 综合应用


## 模式

```viz-dot
graph g {
    node[shape=rect style=filled fillcolor=white colorscheme=accent8 ];
    edge[minlen=3]
    a--b[xlabel="v,V\nctrl-v"];
    b--c[style=invis color=gray ];
    a--c[label="i,a,o"];
    a--"cmd"[label=":" minlen=2];
    {
        rank=same;
        b,c;
    }
    {
        rank=same;
        a,cmd;
    }
    cmd[label="命令模式"]
    a[label="普通 normal"]
    b[label="可视 visual"]
    c[label="插入 insert"]
}
```

vim有以上的几种模式,每种模式的作用如下:

|---------|------------------------------------------|
| normal  | 普通模式，主要的快捷键都在这个模式下执行 |
| insert  | 插入模式，进行编写                       |
| command | 命令模式，我们只要学习几个简单的命令     |
| visual  | 可视（选择）模式                         |

## 如何创建文件与保存退出

`vim {file}`打开/创建一个文件

|-----------------------|----------------------------------------|
| [[:q&#91;uit&#93; ]]  | 退出vim。进行更改后，此操作将失败。    |
| [[:q&#91;uit&#93;! ]] | 退出而不写。                           |
| [[:w]]                | 写入当前文件。                         |
| [[:wq]]               | 写入当前文件并退出。                   |
| [[:wq!]]              | 写入当前文件并始终退出。               |
| [[:wq {file}]]        | 写入{file}。如果不编辑最后一个则退出   |
| [[:wq!{文件}]]        | 写入{file}并始终退出。                 |
| [[ZZ]]                | 写入当前文件（如果已修改），然后退出。 |

## 进入插入模式

|-------|----------------------------------------|
| [[i]] | 在光标之前插入文本。                   |
| [[I]] | 在当前行中的第一个非空白之前插入文本。 |
| [[a]] | 在光标后附加文本。                     |
| [[A]] | 在当前行的末尾附加文本。               |
| [[o]] | 在光标下方开始新行并插入文本。         |
| [[O]] | 在光标上方换行并插入文本。             |

## 移动

基础移动[[h]] [[j]] [[k]] [[l]]

```
        k              
      h   l          
        j             
```
记忆口诀
- [[h]] 左移 它是[[h]]，[[j]]，[[k]]，[[l]]，四个键中最左边的
- [[l]] 右移 它是[[h]]，[[j]]，[[k]]，[[l]]，四个键中最右边的
- [[j]] 下移 它看起来像下箭头[[↓]]
- [[k]] 上移 只剩下它
- 加速，与数字组合 [[2j]]向下移动2行


|-------------|----------------------------------------------------|
| [[0]]       | 到行首。                                           |
| [[^]]       | 到行首第一个非空白字符。                           |
| [[$]]       | 到行尾 或 到下`[count - 1]` 行尾。                 |
| [[f{char}]] | 到右边第`[count]`个`{char}` 字符上。               |
| [[F{char}]] | 到左边第`[count]`个`{char}` 字符上。               |
| [[;]]       | 重复最后一次`f,F` `[count]` 次。                   |
| [[,]]       | 反向重复最后一次`f,F` `[count]` 次。               |
| [[-]]       | 到**上**`[count]`行的行首非空白字符                |
| [[+]]       | 到**下**`[count]`行的行首非空白字符                |
| [[G]]       | go,到第`[count]`行, 默认第一行, 行首非空白字符。   |
| [[gg]]      | go,到第`[count]`行, 默认最后一行, 行首非空白字符。 |
| [[w]]       | word,到后边`[count]`单词开头                       |
| [[W]]       | WORD,到后边`[count]`字串开头                       |
| [[b]]       | before,到前边`[count]`单词开头                     |
| [[B]]       | BEFORE,到前边`[count]`字符开头                     |
| [[e]]       | end,到后边`[count]`单词结尾                        |
| [[E]]       | END,到后边`[count]`字串结尾                        |
| [[ge]]      | go end,后退到单词的末尾[count]                     |
| [[gE]]      | go END,后退到WORD [count]的末尾                    |
| [[H]]       | Home,到当前屏幕的最上边的一行                      |
| [[M]]       | Middle,到当前屏幕的中间边的一行                    |
| [[L]]       | Last,到当前屏幕的最下边的一行                      |
| [[%]]       | 到当前光标匹配的地方                               |
| [['.]]      | 到上一次改变的地方                                 |
| [[g;]]      | 跳转到changelist中[count]个较旧的位置              |
| [[g,]]      | 跳转到changelist中[count]个较新的位置              |

这些命令移到单词或单词上。
单词由字母，数字和下划线组成，或由其他非空白字符组成，并用空格（空格，制表符， ）。可以使用" iskeyword"选项更改。

WORD由一系列非空白字符组成，并用空格分隔。空行也被认为是单词和单词。

## 选择，复制与粘贴

Visual(选择模式)

|----------------|--------------|
| [[v]]          | 进行选择模式 |
| [[V]]          | 行选         |
| [[ctrl]]+[[v]] | 列选         |

在Visual模式下可以用任意的移动命令来扩大选择范围。例如

 - 在第一行[[Vgg]]，全选
 - [[ve]]
 - [[v3e]]
 - 列选下，多行同时编辑
    - 同时在行首，行尾，字符前后，添加内容

抽出与拿出（复制与粘贴）


|----------------|-----------------|
| [[y {motion}]] | yank,抽出，复制 |
| [[yy]]         | 复制[count]行   |
| [[p]]          | put，拿出，粘贴 |
| [[P]]          | 粘贴到光标前    |

- [[yl]] 复制一个字符
- [[ye]][[yw]]复制一个单词
- [[y$]][[y^]]复制到结尾/开头
- [[3yy]]复制三行
- [[yyp]] 复制一行，并粘贴出来
- 先选后复制,复制一列

## 删除/剪切文字

|----------------|-----------------------------------|
| [[x]]          | 删除光标下方和之后的[count]个字符 |
| [[X]]          | 删除光标前的[count]个字符         |
| [[d {motion}]] | 删除{motion}移动的文本            |
| [[dd]]         | 删除[count]行                     |
| [[d$]]          | 删除光标下方的字符，直到行尾      |
| [[dw]]  [[de]] | 删除一个单词                      |

- [[dl]] 删除一个字符
- [[de]][[dw]]删除一个单词
- [[d$]][[d^]]删除到结尾/开头
- [[3dd]]删除三行
- [[ddp]]交换两行
- 先选后删除,删除一列


|----------------|-----------------------------------------------------------|
| [[c {motion}]] | 将 {motion} 跨过的文本删除 [到寄存器 x 里] 并进入插入模式 |
| [[cc]]         | 删除[[count]]行,并进入插入模式                            |
| [[s]]          | 删除[[count]]个字符,并进入插入模式                        |

## 更改文本

|----------------------|-------------------------------------------------------------------------------|
| [[r {char}]]         | 用{char}替换光标下的字符。                                                    |
| [[~]]                | 切换光标下方字符的大小写并将光标向右移动。如果给出[count]，则输入那么多字符。 |
| [[g~{motion}]]       | switch case of {motion} text.                                                 |
| [[g~~]]              | 这一行的大小转换                                                              |
| [[{Visual}~]]        | Switch case of highlighted text                                               |
| [[{Visual}gu]]       | 转小写                                                                        |
| [[{Visual}gU]]       | 转大写                                                                        |
| [[J]]                | 合并下一行                                                                    |
| [[ctrl]]+[[a]]       | 跳到这一行的下一个数字上，并加[count](默认1)                                  |
| {Visual}[[g]][[ctrl]]+[[a]]       | 超过一行，加额外[count]                                  |
| [[ctrl]]+[[x]]       | 跳到这一行的下一个数字上，并减[count](默认1)                                  |
| {Visual}[[g]][[ctrl]]+[[x]]       | 超过一行，减额外[count]                                  |
| :%s/pattern/replace/ | 全文替换                                                                      |
| :.s/pattern/replace/ | 行内替换                                                                      |


## 命令下的复制与剪切

|--------------------------|
| [[:copy]] [[:co]] [[:t]] |
| [-5t.]                   |
| [-5,-1t.]                |
| [[:move]] [[:m]]         |
| [-5m.]                   |
| [-5m.]                   |
| [-5,-1m.]                |


## 搜索

|-------|----------------|
| [[/]] | 进入搜索模式   |
| [[n]] | **下**一个搜索 |
| [[N]] | **上**一个搜索 |


## Undo/Redo/Repeat

|
| u      | 撤销 [count] 改变.        |
| CTRL-R | 重做 [count] 次撤销的改变 |
| .      | 重复[count]改变           |



## 卷屏

|-----------------------|-----------------------------------------|
| [[zz]]                | 光标下的行拖到屏幕中间                  |
| [[zt]]                | top,光标下的行拖到屏幕顶部              |
| [[zb]]                | bottom,光标下的行拖到屏幕底部           |
| [[ctrl-e]]            | 文本上移一(n)行。 助记: 额外 (Extra) 的行。 |
| [[ctrl-y]]            | 文本下移一(n)行                             |
| [[ctrl-f]] [[s-down]] | 上翻一(n)页 助记: Forwards。            |
| [[ctrl-b]] [[s-up]]   | 下翻一(n)页 助记: Backwards。           |
| [[ctrl-d]]            | 下翻半页(n行) 助记: Downwards。         |
| [[ctrl-u]]            | 上翻半页(n行) 助记: Upwards。           |

## 格式化

|---------------|----------------------|
| [[>>]]         | 右对齐（可能是四格） |
| [[<<]]         | 左对齐（可能是四格） |
| [[==]]        | 自动对齐当前行       |
| [[{visual}=]] | 大范围自动对齐       |

## 文本对象 text-object

 - inner 内部
 - around 周围

|--------|--------|
| [[i)]] | 内含块 |
| [[i"]] | 内含块 |
| [[a)]] | 内含块 |
| [[a"]] | 内含块 |


## 挂起

|------------|---------|
| [[ctrl-z]] | 挂起    |
| [[fg]]     | 回到vim |

## 实例
```
struct node {
    int a,b;
}n;

n.a = 1;
n.a = 2; //yy c-a

pr a
pr b // yy f a r b
```
## 练习

vimtutor

## 说明

 - 参考自[Vim Commands Cheat Sheet](http://www.fprintf.net/vimCheatSheet.html),有删减
 - 参考了[vim实用技巧](https://raw.sevencdn.com/lijasonvip/Books_Reading/master/Vim%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7_%E9%AB%98%E6%B8%85_%E4%B8%AD%E6%96%87%E7%89%88.pdf)

