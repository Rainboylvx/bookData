# 树上差分

树上差分是一种技巧,它可以解决以下问题


## 找出树所有被路径覆盖的边

将所有路径上的起点,终点(u,v)的权值加1,`lca(u,v)`的权值减2,然后从叶结点开始把权值向上累加

**所有路径都经过的边:** 权值为路径数的点和其父亲形成的边


## 每条路径(u,v)上的点权值加1,求各点的权

所有路径的起点,终点`(u,v)`的权值加1,`lca(u,v)`的父亲权值减1,lca的父亲的权值-1


## 例题
NKOJ3605 Max Flow 
时间限制 : 10000 MS 空间限制 : 65536 KB 
问题描述 
FJ给他的牛棚的N(2≤N≤50,000)个隔间之间安装了N-1根管道，隔间编号从1到N。所有隔间都被管道连通了。 
FJ有K(1≤K≤100,000)条运输牛奶的路线，第i条路线从隔间si运输到隔间ti。一条运输路线会给它的两个端点处的隔间以及中间途径的所有隔间带来一个单位的运输压力，你需要计算压力最大的隔间的压力是多少。

输入格式 
第一行两个正整数N,K。 
接下来N-1行，每行两个整数x,y(x≠y)，表示有一条管道连接牛棚隔间x和y。 
接下来K行，每行两个整数s,t，表示一条运输路线。

输出格式 
输出一个整数，表示运输压力最大的隔间的运输压力是多少。

样例输入 
5 10 
3 4 
1 5 
4 2 
5 4 
5 4 
5 4 
3 5 
4 3 
4 3 
1 3 
3 5 
5 4 
1 5 
3 4

样例输出 
9

来源 【USACO 2015 Dec Platinum】&感谢nodgd搬运并翻译

## 代码

```c
```

## 参考

 - http://blog.csdn.net/y__xv/article/details/52473888
 - http://blog.csdn.net/y__xv/article/details/52680326
 - http://blog.csdn.net/zhayan9qvq/article/details/54999472
